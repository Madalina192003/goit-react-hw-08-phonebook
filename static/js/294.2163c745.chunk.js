"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[294],{7294:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(5861),a=n(9439),o=n(4687),s=n.n(o),u=n(2791),i=n(1329),c=n(4390),l=n(9255),p=n(4567),f=n(4358),h=n(8176),d=n(4294),m=n(184),v=function(){var e=(0,u.useState)(""),t=(0,a.Z)(e,2),n=t[0],o=t[1],v=(0,u.useState)(""),g=(0,a.Z)(v,2),w=g[0],x=g[1],k=(0,u.useState)(null),b=(0,a.Z)(k,2),y=b[0],j=b[1],Z=(0,i.s0)(),S=function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("Submitting form with:",{email:n,password:w}),e.prev=2,e.next=5,(0,c.pH)({email:n,password:w});case 5:r=e.sent,console.log("Response:",r),j(null),Z("/contacts"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Login error:",e.t0),j("A ap\u0103rut o eroare la autentificare");case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsxs)(l.Z,{maxWidth:"sm",children:[(0,m.jsx)(p.Z,{variant:"h4",gutterBottom:!0,children:"Login"}),(0,m.jsxs)("form",{onSubmit:S,className:"loginForm",children:[y&&(0,m.jsx)(f.Z,{severity:"error",children:y}),(0,m.jsx)(h.Z,{label:"Email",type:"email",fullWidth:!0,variant:"outlined",margin:"normal",value:n,onChange:function(e){return o(e.target.value)}}),(0,m.jsx)(h.Z,{label:"Password",type:"password",fullWidth:!0,variant:"outlined",margin:"normal",value:w,onChange:function(e){return x(e.target.value)}}),(0,m.jsx)(d.Z,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Login"})]})]})}},4390:function(e,t,n){n.d(t,{a$:function(){return c},pH:function(){return l},yF:function(){return p}});var r=n(5861),a=n(4687),o=n.n(a),s="https://connections-api.goit.global",u=function(e){localStorage.setItem("authToken",e)},i=function(){return localStorage.getItem("authToken")},c=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/users/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Failed to register user");case 5:return e.next=7,n.json();case 7:return r=e.sent,u(r.token),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Failed to login user");case 5:return e.next=7,n.json();case 7:return r=e.sent,u(r.token),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/contacts"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i())}});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Failed to fetch contacts");case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=294.2163c745.chunk.js.map